\documentclass[12pt]{article}
\usepackage[italian]{babel}
\usepackage[a4paper,twoside]{geometry}
\usepackage{amsmath}
\usepackage{amssymb,amsfonts,textcomp}
\usepackage{color}
\usepackage{array}
\usepackage{hhline}
\usepackage{hyperref}

\setcounter{tocdepth}{5}

\newcommand\ex[1]
{
  \clearpage
  \setcounter{equation}{0}
  \renewcommand{\theequation}{\thesection.\arabic{equation}}
  \section{Esercizio - #1}
}

\newcommand\psol[1]
{
  \setcounter{equation}{0}
  \renewcommand{\theequation}{\thesubsection.\arabic{equation}}
  \subsection{Soluzione \thesubsection #1}
}

\newcommand\sol{\psol{ }}
\newcommand\slz[1]{\psol{ - #1}}


\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% scrivete qui le soluzioni %
%    \ex{nome_esercizio}    %
%      testo esercizio      %
%       \sol oppure         %
%   \psol{nome_soluzione}   %
%    soluzione esercizio    %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\tableofcontents

\end{document}
